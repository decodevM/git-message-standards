PR_NUMBER=$1
REPO_OWNER=$2
REPO_NAME=$3
GITHUB_TOKEN=$4

# Fetch PR details using GitHub API
PR_DETAILS=$(curl -s -H "Authorization: token $GITHUB_TOKEN" \
  "https://api.github.com/repos/$REPO_OWNER/$REPO_NAME/pulls/$PR_NUMBER")

# Extract the title of the PR
PR_TITLE=$(echo "$PR_DETAILS" | jq -r '.title')

# Print the PR title (for debugging purposes)
echo "PR Title: $PR_TITLE"

# Check if the PR title matches the required format
if [[ ! "$PR_TITLE" =~ ^[a-z]+(\([a-z]+\))?: .+ ]]; then
  echo "ERROR: Invalid PR title format."
  echo "Title should follow this format: type(scope): description"
  exit 1
fi